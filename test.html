<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yazar Göçer</title>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/html2canvas.js"></script>
    <link rel="stylesheet" type="text/css" href="css/test-css.css">

</head>
<body>
<div class="main-wrapper">
    <div class="position-div">
        <div class="left-side-div">
            <div class="background-picker">
                <span>Arka Renk</span>
                <span><input name="background-color" data-txt-val="white" data-bckground="red" type="radio">Kırmızı</span>
                <span><input name="background-color" data-txt-val="black" data-bckground="green" type="radio">Yeşil</span>
                <span><input name="background-color" data-txt-val="black" data-bckground="yellow" type="radio">Sarı</span>
                <span><input name="background-color" data-txt-val="white" data-bckground="blue" type="radio">Mavi</span>
                <span><input name="background-color" data-txt-val="white" data-bckground="black" type="radio">Siyah</span>
                <span><input name="background-color" data-txt-val="white" data-bckground="grey" type="radio">Gri</span>
                <span><input name="background-color" data-txt-val="black" data-bckground="white" type="radio" checked="checked">Beyaz</span>
            </div>
        </div>
        <div class="right-side-div">
            <div class="top-right-side">
            <span class="font-size-picker">
                <span>Salata başlığı </span>
            </span>
            <span class="font-color-picker">
                <span>Yazı boyutu:  <input id="font-chooser" type="number" min="4" max="32" value="14" onchange="setFont()">px</span>
            </span>
            </div>
            <div class="mid-right-side">
                <textarea id="text" onkeyup="toDiv()"></textarea>
            </div>
            <div class="bottom-right-side">
                <button id="btnSave">Resme dönüştür</button>
                <div id="process-div">
                    <div class="example-product">
                        <div class="product-header">Örnek</div>
                        <br>
                        <div id="imager-div">
                            <div id="text-div"></div>
                        </div>
                    </div>
                    <div class="final-product">
                        <div class="product-header">Sonuç</div>
                        <br>
                        <div id="converted-img"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        $('input[name="background-color"]').on('click change', function(e) {
            var bckgrnd = $(this).data('bckground');
            var txtclr = $(this).data('txtVal');

            $('#imager-div').css({'color':txtclr,'background-color':bckgrnd});

        });
    });

    var startVal = 16;

    function toDiv(){
        var text = $("#text").val();
        text = text.replace(/\r?\n/g, '<br>');

        if (text.length % startVal === 1) {
            $("#text").val($("#text").val()+'<br>');
            startVal += 4;
        } else {
            $('#imager-div').html(text);
        }
    }

    function setFont(){
        var fontValue = $('#font-chooser').val();
        $('#imager-div').css({'font-size':fontValue+'px','line-height':fontValue+'px'});
    }

    $(function() {
        $("#btnSave").click(function() {
            html2canvas(document.getElementById('imager-div'), {
                onrendered: function(canvas) {
                    $('canvas').remove();
                    $('#converted-img').append(canvas);

                }
            });
        });
    });

</script>
</body>
</html>